# Kotitehtävä 2: Karjaa

## x) Tiivistelmä
#### Slater 2017
- Foorumilla [What is the definition of "cattle not pets"?](https://devops.stackexchange.com/questions/653/what-is-the-definition-of-cattle-not-pets#654) puhutaan eri lähestymistavoista serverin infrastruktuuriin (miten servereitä kohdeltaisiin).
- Kun puhutaan **pets/lemmikeistä**, serverit ovat uniikkeja systeemejä jotka ovat vaativia, sillä tavalla että ne pitää manuaalisesti itse rakentaa ja itse operoida. Lisäksi kun se kaatuu, niin kaikki pysähtyy.
- Kun puhutaan **cattle/karjasta**, rakennattu automatisoiduista työkaluista ja ovat korvattavissa toisella palvelimella niin, että palvelu ei ehdi kaatua.

#### Karvinen 2017
- Artikkelissa [Vagrant Revisited – Install & Boot New Virtual Machine in 31 seconds](https://terokarvinen.com/2017/04/11/vagrant-revisited-install-boot-new-virtual-machine-in-31-seconds/) opetetaan, miten Vagrant ladataan.
- `sudo apt-get update` & `sudo apt-get -y install vagrant virtualbox`: Ladataan Vagrant ja VirtualBox.
- `vagrant init bento/ubuntu-16.04`
  `vagrant up`
  `vagrant ssh`: Initialisoidaan uusi kone.

  [Täällä](https://terokarvinen.com/2023/configuration-management-2023-autumn/) suositellaan käyttämään `vagrant init debian/bullseye64`.

#### Karvinen 2023
- Artikkelissa [Salt Vagrant - automatically provision one master and two slaves](https://terokarvinen.com/2023/salt-vagrant/) käydään läpi, miten voidaan luoda yhteys kolmen laitteen välillä, jossa yksi on herra ja kaksi minioneita. Konfigurointihallinta sallii satojen laitteiden kontrolloimisen.

## a) Vagrantin asennus
- Asennetaan Windowsille Vagrant [tältä sivulta](https://developer.hashicorp.com/vagrant/downloads): ladataan Windowsille AMD64 versio 2.4.0. Käynnistetään kone uudelleen.


## b) Yksi maankiertäjä

- Asennetaan Vagrant isäntäkoneelle [tätä raporttia hyödyntäen](https://oispadotka.wordpress.com/2020/05/12/h6/) cmd:stä Windowsilla.
  
  ![image](https://github.com/16cats/Infra-as-Code-course/assets/97065659/1aec8b26-2e9a-4a08-beda-973e8bdb7ce2)

  ![image](https://github.com/16cats/Infra-as-Code-course/assets/97065659/e2e41456-4417-43b3-9523-33ac3fd87e71)

- Komentokehote näytti kaiken, mitä komennot tekivät. 
- VirtualBoxiin ilmestyi kone `vagrant up` komennon jälkeen.

    ![image](https://github.com/16cats/Infra-as-Code-course/assets/97065659/9adc706f-732f-43e8-a11c-4d2f20810b43)

- Otetaan SSH-yhteys.
  ![image](https://github.com/16cats/Infra-as-Code-course/assets/97065659/18be176d-9bb9-4ad9-876b-ffcd382615f4)

- SSH-yhteydenotto onnistui. Testataan, että internet-yhteys toimii.

  ![image](https://github.com/16cats/Infra-as-Code-course/assets/97065659/2c5c8cca-af05-4458-b255-7b1fd5d46dbd)

- Hyvin toimii.

## c) Oma orjansa
- Ladataan herra ja orja samalle koneelle.
- `sudo apt-get -y install vagrant micro`: fndksfdnk
- fdsf
  ![image](https://github.com/16cats/Infra-as-Code-course/assets/97065659/088ec07b-db9c-4b88-8122-f841e7eb12d3)

  ![image](https://github.com/16cats/Infra-as-Code-course/assets/97065659/ee3da185-0e83-4782-9ea5-2039aabe7373)

- Vagrantfileen kopioin [valmiin Vagrantfilen](https://terokarvinen.com/2023/salt-vagrant/) muokaten sitä vähän niin, että siinä on 1 herra ja 1 orja.
  
  ![image](https://github.com/16cats/Infra-as-Code-course/assets/97065659/aa98ac84-28b1-4d75-b723-c9a66ea60bd1)


- f

  
## Lähteet
https://oispadotka.wordpress.com/2020/05/12/h6/
